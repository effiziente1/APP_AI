<div class="flex flex-col h-full gap-4">
    <!-- Error Alert: show ALL validation + API errors -->
    @if (allErrors()) {
    <div hlmAlert variant="destructive" class="relative">
        <ng-icon hlm hlmAlertIcon name="lucideAlertCircle" />
        <h4 hlmAlertTitle>Errors</h4>
        <div hlmAlertDescription>
            <ul class="list-disc pl-5 space-y-1">
                @for (msg of allErrors(); track $index) {
                <li>{{ msg }}</li>
                }
            </ul>
        </div>
        <button (click)="dismissError()" hlmBtn variant="ghost" size="icon"
            class="absolute top-2 right-2 h-6 w-6 rounded-full">
            <ng-icon hlm name="lucideX" size="sm" />
        </button>
    </div>
    }

    <!-- Input Area -->
    <div class="flex flex-col gap-2 items-end border-2 p-2 rounded-3xl focus-within:border-black">
        <textarea [field]="promptForm.prompt" hlmTextarea
            class="w-full border-0 shadow-none focus:!border-0 focus:!outline-none focus:!ring-0 resize-none focus:shadow-none hlmTextarea"
            placeholder="Ask anything"></textarea>
        <button (click)="sendMessage()" hlmBtn class="rounded-full w-9 h-9"
            [disabled]="promptForm().invalid() || isLoading()">
            <ng-icon hlm name="lucideArrowUp" />
        </button>
    </div>
</div>